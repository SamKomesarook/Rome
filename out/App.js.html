<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: App.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: App.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component, Fragment } from "react";
import { Transition, animated } from "react-spring/renderprops";
import ReactTooltip from "react-tooltip";
import Header from "./components/layout/Header";
import TextArea from "./components/elements/TextArea";
import Slider from "./components/elements/Slider";
import Button from "./components/elements/Button";
import Tooltips from "./components/elements/Tooltips";
import InputOutputArea from "./components/elements/InputOutputArea";
import "hover.css";
import "./App.css";

import { constructMem, mapMemObjToSymbol } from "./MemFunc";

const memArr = [15];
const startpoint = "0%";
const endpoint = "200%";
var t;

export class App extends Component {
  constructor(props) {
    super(props);
    this.state = {
      showRunTimeAnimation: false,
      showBinaryString: false,
      memState: memArr,
      showAnimationArea: true,
      showTextArea: true,
      showIOWindow: true,
      loopAnimation: false
    };
    this.toggleRef = this.toggleRef.bind(this);
    this.toggleIOWindow = this.toggleIOWindow.bind(this);
    this.toggleTextArea = this.toggleTextArea.bind(this);
    this.toggleAnimationArea = this.toggleAnimationArea.bind(this);
    this.initiliazeBinaryString = this.initiliazeBinaryString.bind(this);
    this.toggleBinaryString = this.toggleBinaryString.bind(this);

    // bind function in order to reach callback
    // back end function
    this.updateMem = this.updateMem.bind(this);
    this.moveMem = this.moveMem.bind(this);
    this.updateContentType = this.updateContentType.bind(this);
    this.writeContent = this.writeContent.bind(this);
    this.freeMem = this.freeMem.bind(this);
    this.sendMemAnimation = this.sendMemAnimation.bind(this);
    this.readMemAnimation = this.readMemAnimation.bind(this);

    // animation function
    this.loopAnimation = this.loopAnimation.bind(this);
    this.stop = this.stop.bind(this);

    this.memArr = constructMem();
    this.ref = [];
  }

  /**
   * update the memArr using id and new memory JSX
   * @param {int} id memory id
   * @param {MemoryJSX} mem new memory JSX
   */
  updateMem(id, mem) {
    this.memArr[id] = mem;
    this.setState({
      memState: this.memArr
    });
  }

  /**
   * update the contentType of selected memory JSX
   * @param {int} id memory id
   * @param {MemoryBlock} memObj MemoryBlock object
   */
  updateContentType(id, memObj) {
    var newMem = mapMemObjToSymbol(memObj);
    this.updateMem(id, newMem);
  }

  /**
   * move selected memory
   * @param {MemoryBlock} oldMemObj MemoryBlock which will be de-selected
   * @param {MemoryBlock} newMemObj MemroyBlock which the selected state will be set to true
   */
  moveMem(oldMemObj, newMemObj) {
    var oldMem = mapMemObjToSymbol(oldMemObj);
    var newMem = mapMemObjToSymbol(newMemObj);
    this.updateMem(oldMemObj.getId(), oldMem);
    this.updateMem(newMemObj.getId(), newMem);
  }

  /**
   * Function for print the errMessage to dashboard area in red color
   * @param {string} errMessage - The message that will be printed in red color on dashboard
   */
  errorAnimation(errMessage) {
    var errMessageDiv =
      "&lt;span style='color:red'>" + errMessage + "&lt;/span>&lt;br/>";
    var oldMessage = document.getElementById("outputArea").innerHTML;
    oldMessage += errMessageDiv;
    document.getElementById("outputArea").innerHTML = oldMessage;
  }

  /**
   * Function for print the message received to dashboard area
   * @param {string} argument - The message that will be printed on dashboard
   */
  printAnimation(argument) {
    var argumentDiv = "&lt;span>" + argument + "&lt;/span>&lt;br/>";
    var oldMessage = document.getElementById("outputArea").innerHTML;
    oldMessage += argumentDiv;
    document.getElementById("outputArea").innerHTML = oldMessage;
  }

  /**
   * write content to a memory JSX
   * @param {MemoryBlock} memObj MemoryBlock Object which has the content information
   */
  writeContent(memObj) {
    var id = memObj.id;
    var newMem = mapMemObjToSymbol(memObj);
    this.updateMem(id, newMem);
  }

  /**
   * release memory availability of selected memory
   * @param {MemoryBlock} memObj MemoryBlock object which content is empty
   */
  freeMem(memObj) {
    var id = memObj.id;
    var newMem = mapMemObjToSymbol(memObj);
    this.updateMem(id, newMem);
  }

  // set state before render
  componentWillMount() {
    this.setState({
      memState: this.memArr
    });
  }

  componentDidMount() {
    window.addEventListener("beforeunload", () => {
      this.closeWindowPortal();
    });
  }

  /**
   * open or close IO window
   */
  toggleIOWindow() {
    this.setState(state => ({
      ...state,
      showIOWindow: !state.showIOWindow
    }));
  }

  /**
   * function used to show/hide the animation area and the memory board
   */
  toggleAnimationArea() {
    this.setState(state => ({
      ...state,
      showAnimationArea: !state.showAnimationArea
    }));
  }

  /**
   * function used to show/hide the coding area
   */
  toggleTextArea() {
    this.setState(state => ({
      ...state,
      showTextArea: !state.showTextArea
    }));
  }

  /**
   * function used to display the animated binary string
   */
  toggleBinaryString() {
    if (!this.state.showRunTimeAnimation) {
      this.setState(state => ({
        ...state,
        showBinaryString: !state.showBinaryString
      }));
      var _this = this;
      this.setState(state => ({
        ...state,
        showRunTimeAnimation: true
      }));
      t = setInterval(function() {
        _this.setState(state => ({
          ...state,
          showBinaryString: !state.showBinaryString
        }));
      }, 1500);
    }
  }

  /**
   * function used to hide the animated binary string
   */
  initiliazeBinaryString() {
    this.setState(state => ({
      ...state,
      showRunTimeAnimation: false
    }));
    clearTimeout(t);
    this.setState(state => ({
      ...state,
      showBinaryString: false
    }));
  }

  /**
   * Function for info button
   * Display all tooltips on click
   * setTimeout hide all tooltip
   */
  toggleRef = () => {
    console.log(this.ref);
    for (var i = 0; i &lt; this.ref.length; i++) {
      // console.log(this.testRef[i]);
      ReactTooltip.show(this.ref[i]);
    }

    setTimeout(() => ReactTooltip.hide(), 1000);
  };

  /**
   * Fuction for stop button,which intialize the memory blocks
   */
  stop() {
    this.memArr = constructMem();
    this.setState({
      memState: this.memArr
    });
    this.initiliazeBinaryString();
    document.getElementById("outputArea").innerHTML = "";
  }

  /**
   * Function for Loop Animation
   */
  loopAnimation() {
    this.setState(state => ({
      ...state,
      loopAnimation: !state.loopAnimation
    }));
  }

  /**
   * Set the animation state for memory block
   * @param {MemoryBlock} memObj MemoryBlock object, has to be either network memory or usb memory
   */
  setMemoryAnimationState(memObj) {
    setTimeout(() => {
      memObj.setAnimated(memObj.getAnimated() ? false : true);
      memObj.setContent("");
      var id = memObj.getId();
      var mem = mapMemObjToSymbol(memObj);
      this.updateMem(id, mem);
    }, 5000);
  }

  /**
   * Send netMem/usbMem animation
   * @param {MemoryBlock} memObj MemoryBlock object, has to be either network memory or usb memory
   */
  sendMemAnimation(memObj) {
    var id = memObj.getId();
    var mem = mapMemObjToSymbol(memObj);
    this.updateMem(id, mem);
    this.setMemoryAnimationState(memObj);
  }

  /**
   * read netMem/usbMem animation
   * @param {MemoryBlock} memObj MemoryBlock object, has to be either network memory or usb memory
   */
  readMemAnimation(memObj) {
    var id = memObj.getId();
    var mem = mapMemObjToSymbol(memObj);
    this.updateMem(id, mem);
    this.setMemoryAnimationState(memObj);
  }

  render() {
    return (
      &lt;Fragment>
        &lt;Header />
        &lt;div className="container-fluid">
          &lt;div className="row">
            &lt;div
              className="col-sm-2"
              data-tip
              data-for="ComponentArea"
              ref={el => this.ref.push(el)}
            >
              &lt;span className="btnToggle">
                &lt;button className="btn btn-dark btn-circle">
                  &lt;i className="far fa-caret-square-right">&lt;/i>
                &lt;/button>
                &lt;div className="btn-group-vertical btnGroup" role="group">
                  &lt;Button name="Coding Area" toggle={this.toggleTextArea} />
                  &lt;Button
                    name="Animation Area"
                    toggle={this.toggleAnimationArea}
                  />
                  &lt;Button name="IO Window" toggle={this.toggleIOWindow} />
                &lt;/div>
              &lt;/span>
            &lt;/div>
            &lt;div className="col">
              &lt;div className="row">
                {this.state.showTextArea ? (
                  &lt;div
                    className={
                      this.state.showAnimationArea
                        ? "col-sm-4 executeBtn"
                        : "col-sm-6 executeBtn"
                    }
                  >
                    &lt;TextArea compRef={el => this.ref.push(el)} />
                    &lt;div className="row slider-container">
                      &lt;Slider compRef={el => this.ref.push(el)} />
                    &lt;/div>
                    &lt;div className="row" id="executBtnGroup">
                      &lt;div
                        className={
                          this.state.showAnimationArea
                            ? "col-sm-3 executeBtn"
                            : "col-sm-2 executeBtn"
                        }
                      >
                        &lt;Button
                          name="Run"
                          toggle={this.toggleBinaryString}
                          memArr={this.memArr}
                          compRef={el => this.ref.push(el)}
                          updateContentType={this.updateContentType}
                          moveMem={this.moveMem}
                          writeContent={this.writeContent}
                          freeMem={this.freeMem}
                          sendMemAnimation={this.sendMemAnimation}
                          readMemAnimation={this.readMemAnimation}
                          printAnimation={this.printAnimation}
                        />
                      &lt;/div>
                      &lt;div
                        className={
                          this.state.showAnimationArea
                            ? "col-sm-3 executeBtn"
                            : "col-sm-2 executeBtn"
                        }
                      >
                        &lt;Button
                          name="Stop"
                          toggle={this.stop}
                          compRef={el => this.ref.push(el)}
                        />
                      &lt;/div>

                      &lt;div
                        className={
                          this.state.showAnimationArea
                            ? "col-sm-3 executeBtn"
                            : "col-sm-2 executeBtn"
                        }
                      >
                        &lt;Button name="Info" toggle={this.toggleRef} />
                      &lt;/div>

                      &lt;div
                        className={
                          this.state.showAnimationArea ? "col-sm-3" : "col-sm-2"
                        }
                      >
                        &lt;Button name="Help" />
                      &lt;/div>
                    &lt;/div>
                  &lt;/div>
                ) : null}
                {this.state.showAnimationArea &amp;&amp; (
                  &lt;div className="col-sm-3" id="animationArea">
                    &lt;div className="row" id="cpuArea">
                      &lt;div id="animatedBinary">
                        &lt;Transition
                          native
                          items={this.state.showBinaryString}
                          from={{ opacity: 0, marginLeft: startpoint }}
                          enter={{ opacity: 1, marginLeft: endpoint }}
                          leave={{ opacity: 0 }}
                        >
                          {show =>
                            show &amp;&amp;
                            (props => (
                              &lt;animated.div style={props}>1011101&lt;/animated.div>
                            ))
                          }
                        &lt;/Transition>
                      &lt;/div>
                      &lt;i className="fas fa-microchip fa-4x" />
                    &lt;/div>
                  &lt;/div>
                )}
                &lt;div
                  className={
                    this.state.showAnimationArea
                      ? "col-sm-5 " +
                        (this.state.loopAnimation ? "memory-border" : "")
                      : "col-sm-5"
                  }
                  id="memory"
                  data-tip
                  data-for="AnimationArea"
                  ref={el => this.ref.push(el)}
                >
                  {this.state.showAnimationArea &amp;&amp; (
                    &lt;div className="row-sm-6">
                      &lt;div className="row">
                        &lt;div className="col">{this.memArr[0]}&lt;/div>
                        &lt;div className="col">{this.memArr[1]}&lt;/div>
                        &lt;div className="col">{this.memArr[2]}&lt;/div>
                      &lt;/div>
                      &lt;div className="row">
                        &lt;div className="col">{this.memArr[3]}&lt;/div>
                        &lt;div className="col">{this.memArr[4]}&lt;/div>
                        &lt;div className="col">{this.memArr[5]}&lt;/div>
                      &lt;/div>
                      &lt;div className="row">
                        &lt;div className="col">{this.memArr[6]}&lt;/div>
                        &lt;div className="col">{this.memArr[7]}&lt;/div>
                        &lt;div className="col">{this.memArr[8]}&lt;/div>
                      &lt;/div>
                      &lt;div className="row">
                        &lt;div className="col">{this.memArr[9]}&lt;/div>
                        &lt;div className="col">{this.memArr[10]}&lt;/div>
                        &lt;div className="col">{this.memArr[11]}&lt;/div>
                      &lt;/div>
                      &lt;div className="row">
                        &lt;div className="col">{this.memArr[12]}&lt;/div>
                        &lt;div className="col">{this.memArr[13]}&lt;/div>
                        &lt;div className="col">{this.memArr[14]}&lt;/div>
                      &lt;/div>
                    &lt;/div>
                  )}
                  {this.state.showIOWindow &amp;&amp; (
                    &lt;div className="row">
                      &lt;div className="col-sm-12">
                        &lt;InputOutputArea compRef={el => this.ref.push(el)} />
                      &lt;/div>
                    &lt;/div>
                  )}
                &lt;/div>
              &lt;/div>
            &lt;/div>
          &lt;/div>
        &lt;/div>
        &lt;Tooltips />{" "}
      &lt;/Fragment>
    );
  }
}

export default App;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ErrorReporter.html">ErrorReporter</a></li><li><a href="Interpreter.html">Interpreter</a></li><li><a href="MemoryBlock.html">MemoryBlock</a></li><li><a href="RVisitor.html">RVisitor</a></li><li><a href="Utility.html">Utility</a></li></ul><h3>Global</h3><ul><li><a href="global.html#constructMem">constructMem</a></li><li><a href="global.html#mapMemObjToSymbol">mapMemObjToSymbol</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Oct 10 2019 15:03:18 GMT+1100 (Australian Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
